# wallet_daa_bridge

 Wallet DAA-Bridge is an Android application. 
 Communicates through intents with the DAA wallet application which should be installed in the same device.  

## Requirements
* Android Studio Arctic Fox
* Android version >= 5.0(Lollipop)

## How to Build 
 1) Open the project with Android Studio
 2) Go to Build Variants and select Active Build Variant(Debug or release)	
 3) Build -> Rebuild Project 
 4) Find the generated apk file into the output folder(app\build\outputs\apk)


## How to Run
1) You can use	a virtual device or an android device to run the application in debug mode,
from Android Studio. Otherwise you can copy the apk file in your android device. 
2) Install and then open the application. The text "Installation Succeeded" will be displayed.
3) After installation the Wallet DAA-Bridge can interact with DAA wallet through intents.

## Intent Actions
* eu.door.daa_bridge.REGISTER -> This intent is initiated by the host Wallet to the DAA-Bridge application so that the initial pairing/linking process can take place. his provides the necessary features of only a specific wallet been able to manage the issued VCs, thus, providing verifiable evidence on the origin of a VC (ensuring that each entity is in fact the one it claims to be);
* eu.door.daa_bridge.ENABLE - > This intent is initiated by the host Wallet to (already paired) DAA-Bridge for getting back the Registration Object required for the the Wallet to register to the VC Issuer and then to the DAA Issuer in order to create the correct HA-based DAA Key;
* eu.door.daa_bridge.ISSUE -> This intent is initiated by the host Wallet when it needs to connect to the VC Issuer for requesting the issuance of a VC including the "Device State Evidence" attribute. This intent returns back a TPM nonce (generated by the DAA Core library) so that it can be signed by the Wallet prior to be forwarded to the DAA Issuer (through the VC Issuer). This signature can then be verified by the DAA Issuer to check whether the correct DAA Key was used in which case it issues the correct evidence state to be added in the overall VA; 
* eu.door.daa_bridge.SIGN_VC -> This intent is initiated by the host Wallet for getting the validity check of a long-lived VC started. Essentially, it notified the DAA-Bridge component that the Wallet wished to issue some fresh verifiable proofs and it wants to check whether the already issued VCs are still valid  -not state change has occured in the device;
* eu.door.daa_bridge.SIGN_VP_REQ - > This intent comes as a continuation to the previous action. It sends to the DAA-Bridge the device state evidence from the VCs, based on which the verifiable proofs will be constructed, so that the DAA-Bridge can then check (through the underlying TPM) whether the signatures (included in the evidence objects) are still valid (created under the correct DAA Key);
* eu.door.daa_bridge.SIGN_VP -> If all such VCs are valid, then the Wallet requests from the DAA-Bridge to sign the issued VP using the hw-based DAA Key
